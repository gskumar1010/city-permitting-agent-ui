INFO     2025-09-25 20:07:48,132 __main__:441 server: Using config file: /opt/app-root/run.yaml                                                       
INFO     2025-09-25 20:07:48,136 __main__:443 server: Run configuration:                                                                              
INFO     2025-09-25 20:07:48,144 __main__:445 server: apis:                                                                                           
         - agents                                                                                                                                     
         - datasetio                                                                                                                                  
         - eval                                                                                                                                       
         - inference                                                                                                                                  
         - safety                                                                                                                                     
         - scoring                                                                                                                                    
         - telemetry                                                                                                                                  
         - tool_runtime                                                                                                                               
         - vector_io                                                                                                                                  
         benchmarks: []                                                                                                                               
         container_image: null                                                                                                                        
         datasets: []                                                                                                                                 
         external_providers_dir: !!python/object/apply:pathlib.PosixPath                                                                              
         - /                                                                                                                                          
         - opt                                                                                                                                        
         - app-root                                                                                                                                   
         - src                                                                                                                                        
         - .llama                                                                                                                                     
         - providers.d                                                                                                                                
         image_name: rh                                                                                                                               
         inference_store:                                                                                                                             
           db_path: /opt/app-root/src/.llama/distributions/rh/inference_store.db                                                                      
           type: sqlite                                                                                                                               
         logging: null                                                                                                                                
         metadata_store:                                                                                                                              
           db_path: /opt/app-root/src/.llama/distributions/rh/registry.db                                                                             
           namespace: null                                                                                                                            
           type: sqlite                                                                                                                               
         models:                                                                                                                                      
         - metadata: {}                                                                                                                               
           model_id: llama32                                                                                                                          
           model_type: !!python/object/apply:llama_stack.apis.models.models.ModelType                                                                 
           - llm                                                                                                                                      
           provider_id: vllm-inference                                                                                                                
           provider_model_id: null                                                                                                                    
         - metadata:                                                                                                                                  
             embedding_dimension: 768                                                                                                                 
           model_id: granite-embedding-125m                                                                                                           
           model_type: !!python/object/apply:llama_stack.apis.models.models.ModelType                                                                 
           - embedding                                                                                                                                
           provider_id: sentence-transformers                                                                                                         
           provider_model_id: ibm-granite/granite-embedding-125m-english                                                                              
         providers:                                                                                                                                   
           agents:                                                                                                                                    
           - config:                                                                                                                                  
               persistence_store:                                                                                                                     
                 db_path: /opt/app-root/src/.llama/distributions/rh/agents_store.db                                                                   
                 namespace: null                                                                                                                      
                 type: sqlite                                                                                                                         
               responses_store:                                                                                                                       
                 db_path: /opt/app-root/src/.llama/distributions/rh/responses_store.db                                                                
                 type: sqlite                                                                                                                         
             provider_id: meta-reference                                                                                                              
             provider_type: inline::meta-reference                                                                                                    
           datasetio:                                                                                                                                 
           - config:                                                                                                                                  
               kvstore:                                                                                                                               
                 db_path: /opt/app-root/src/.llama/distributions/rh/huggingface_datasetio.db                                                          
                 namespace: null                                                                                                                      
                 type: sqlite                                                                                                                         
             provider_id: huggingface                                                                                                                 
             provider_type: remote::huggingface                                                                                                       
           - config:                                                                                                                                  
               kvstore:                                                                                                                               
                 db_path: /opt/app-root/src/.llama/distributions/rh/localfs_datasetio.db                                                              
                 namespace: null                                                                                                                      
                 type: sqlite                                                                                                                         
             provider_id: localfs                                                                                                                     
             provider_type: inline::localfs                                                                                                           
           eval:                                                                                                                                      
           - config:                                                                                                                                  
               base_url: https://llama32-mechanic.apps.cluster-ldshg.ldshg.sandbox5245.opentlc.com/v1                                                 
               use_k8s: true                                                                                                                          
             provider_id: trustyai_lmeval                                                                                                             
             provider_type: remote::trustyai_lmeval                                                                                                   
           inference:                                                                                                                                 
           - config:                                                                                                                                  
               api_token: '********'                                                                                                                  
               max_tokens: 4096                                                                                                                       
               tls_verify: false                                                                                                                      
               url: https://llama32-mechanic.apps.cluster-ldshg.ldshg.sandbox5245.opentlc.com/v1                                                      
             provider_id: vllm-inference                                                                                                              
             provider_type: remote::vllm                                                                                                              
           - config: {}                                                                                                                               
             provider_id: sentence-transformers                                                                                                       
             provider_type: inline::sentence-transformers                                                                                             
           safety:                                                                                                                                    
           - config:                                                                                                                                  
               orchestrator_url: http://localhost                                                                                                     
               shields: {}                                                                                                                            
               ssl_cert_path: null                                                                                                                    
             provider_id: trustyai_fms                                                                                                                
             provider_type: remote::trustyai_fms                                                                                                      
           scoring:                                                                                                                                   
           - config: {}                                                                                                                               
             provider_id: basic                                                                                                                       
             provider_type: inline::basic                                                                                                             
           - config: {}                                                                                                                               
             provider_id: llm-as-judge                                                                                                                
             provider_type: inline::llm-as-judge                                                                                                      
           - config:                                                                                                                                  
               openai_api_key: '********'                                                                                                             
             provider_id: braintrust                                                                                                                  
             provider_type: inline::braintrust                                                                                                        
           telemetry:                                                                                                                                 
           - config:                                                                                                                                  
               otel_exporter_otlp_endpoint: null                                                                                                      
               service_name: "\u200B"                                                                                                                 
               sinks: console,sqlite                                                                                                                  
               sqlite_db_path: /opt/app-root/src/.llama/distributions/rh/trace_store.db                                                               
             provider_id: meta-reference                                                                                                              
             provider_type: inline::meta-reference                                                                                                    
           tool_runtime:                                                                                                                              
           - config:                                                                                                                                  
               api_key: '********'                                                                                                                    
               max_results: 3                                                                                                                         
             provider_id: brave-search                                                                                                                
             provider_type: remote::brave-search                                                                                                      
           - config:                                                                                                                                  
               api_key: '********'                                                                                                                    
               max_results: 3                                                                                                                         
             provider_id: tavily-search                                                                                                               
             provider_type: remote::tavily-search                                                                                                     
           - config: {}                                                                                                                               
             provider_id: rag-runtime                                                                                                                 
             provider_type: inline::rag-runtime                                                                                                       
           - config: {}                                                                                                                               
             provider_id: model-context-protocol                                                                                                      
             provider_type: remote::model-context-protocol                                                                                            
           vector_io:                                                                                                                                 
           - config:                                                                                                                                  
               db_path: /opt/app-root/src/.llama/distributions/rh/milvus.db                                                                           
               kvstore:                                                                                                                               
                 db_path: /opt/app-root/src/.llama/distributions/rh/milvus_registry.db                                                                
                 namespace: null                                                                                                                      
                 type: sqlite                                                                                                                         
             provider_id: milvus                                                                                                                      
             provider_type: inline::milvus                                                                                                            
         scoring_fns: []                                                                                                                              
         server:                                                                                                                                      
           auth: null                                                                                                                                 
           host: null                                                                                                                                 
           port: 8321                                                                                                                                 
           quota: null                                                                                                                                
           tls_cafile: null                                                                                                                           
           tls_certfile: null                                                                                                                         
           tls_keyfile: null                                                                                                                          
         shields: []                                                                                                                                  
         tool_groups:                                                                                                                                 
         - args: null                                                                                                                                 
           mcp_endpoint: null                                                                                                                         
           provider_id: tavily-search                                                                                                                 
           toolgroup_id: builtin::websearch                                                                                                           
         - args: null                                                                                                                                 
           mcp_endpoint: null                                                                                                                         
           provider_id: rag-runtime                                                                                                                   
           toolgroup_id: builtin::rag                                                                                                                 
         vector_dbs: []                                                                                                                               
         version: 2                                                                                                                                   
                                                                                                                                                      
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/opt/app-root/lib64/python3.12/site-packages/llama_stack/distribution/server/server.py", line 601, in <module>
    main()
  File "/opt/app-root/lib64/python3.12/site-packages/llama_stack/distribution/server/server.py", line 491, in main
    impls = asyncio.run(construct_stack(config))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 684, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/opt/app-root/lib64/python3.12/site-packages/llama_stack/distribution/stack.py", line 284, in construct_stack
    run_config, provider_registry or get_provider_registry(run_config), dist_registry, policy
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/app-root/lib64/python3.12/site-packages/llama_stack/distribution/distribution.py", line 150, in get_provider_registry
    raise FileNotFoundError(f"External providers directory not found: {external_providers_dir}")
FileNotFoundError: External providers directory not found: /opt/app-root/src/.llama/providers.d